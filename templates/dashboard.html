{% extends "base.html" %}

{% block title %}Главная - AI Генератор Кейсов{% endblock %}

{% block content %}
<div class="fade-in">
    <h1 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem; font-size: 1.75rem;">
        <i class="fas fa-home"></i>
        Добро пожаловать, {{ current_user.username }}!
    </h1>

    <!-- Статистика -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ stats.total }}</div>
            <div class="stat-label">
                <i class="fas fa-folder"></i>
                Всего кейсов
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.completed }}</div>
            <div class="stat-label">
                <i class="fas fa-check-circle"></i>
                Завершено
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.in_progress }}</div>
            <div class="stat-label">
                <i class="fas fa-spinner"></i>
                В процессе
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.new }}</div>
            <div class="stat-label">
                <i class="fas fa-star"></i>
                Новых
            </div>
        </div>
    </div>

    <!-- Генерация кейса -->
    <div class="card" style="margin-top: 2rem;">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-magic"></i>
                Сгенерировать новый кейс
            </h2>
            <p style="color: var(--text-secondary); margin-top: 0.5rem;">
                Выберите уровень сложности и опционально укажите тему для генерации уникального кейса
            </p>
        </div>

        <form method="POST" action="{{ url_for('generate_case') }}">
            {{ form.hidden_tag() }}
            
            <div class="form-group">
                {{ form.level.label(class="form-label") }}
                {{ form.level(class="form-control") }}
                {% if form.level.errors %}
                    <div style="color: var(--error); margin-top: 0.5rem; font-size: 0.9rem;">
                        {% for error in form.level.errors %}
                            <i class="fas fa-exclamation-circle"></i> {{ error }}
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="form-group">
                {{ form.topic.label(class="form-label") }}
                {{ form.topic(class="form-control", placeholder="Например: веб-разработка, алгоритмы, базы данных...") }}
                <small style="color: var(--text-muted); font-size: 0.85rem;">
                    <i class="fas fa-info-circle"></i> Это поле необязательно
                </small>
            </div>

            <div class="form-group">
                {{ form.submit(class="btn btn-primary", style="width: 100%; font-size: 1.1rem; padding: 1rem;") }}
            </div>
        </form>
    </div>

    <!-- Быстрые действия -->
    <div style="margin-top: 2rem;">
        <h2 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.75rem;">
            <i class="fas fa-bolt"></i>
            Быстрые действия
        </h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <a href="{{ url_for('my_cases') }}" class="card" style="text-decoration: none; text-align: center;">
                <i class="fas fa-folder-open" style="font-size: 2rem; color: var(--primary-color); margin-bottom: 0.5rem;"></i>
                <h3 style="margin-bottom: 0.5rem;">Мои кейсы</h3>
                <p style="color: var(--text-secondary); font-size: 0.9rem;">Просмотр всех кейсов</p>
            </a>
            <a href="{{ url_for('profile') }}" class="card" style="text-decoration: none; text-align: center;">
                <i class="fas fa-user" style="font-size: 2rem; color: var(--secondary-color); margin-bottom: 0.5rem;"></i>
                <h3 style="margin-bottom: 0.5rem;">Профиль</h3>
                <p style="color: var(--text-secondary); font-size: 0.9rem;">Настройки аккаунта</p>
            </a>
        </div>
    </div>
</div>
{% endblock %}

